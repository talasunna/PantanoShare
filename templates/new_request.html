{% extends "base.html" %}
{% block content %}
  <h1 class="h4 mb-3">New Request</h1>
  {% if not session.house_id %}
    <div class="alert alert-info">Please <a href="{{ url_for('signup') }}">sign in</a> first.</div>
  {% endif %}
  <form method="post" class="card card-body">
    <div class="row g-3">
      <div class="col-md-5">
        <label class="form-label">Store</label>
        <select class="form-select" name="store_id" required>
          <option value="">Choose…</option>
          {% for s in stores %}
            <option value="{{ s.id }}">{{ s.name }} ({{ s.village.name }})</option>
          {% endfor %}
        </select>
        <div class="form-text">If the store is missing, ask someone to add it on the Stores page.</div>
      </div>
      <div class="col-md-4">
        <label class="form-label">Item name</label>
        <input class="form-control" name="item_name" required>
      </div>
      <div class="col-md-3">
        <label class="form-label">Quantity</label>
        <input type="number" step="1" min="1" class="form-control" name="quantity" value="1" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">Price limit (€)</label>
        <input type="number" step="0.01" min="0" class="form-control" name="price_limit" placeholder="Optional">
      </div>
      <div class="col-md-8">
        <label class="form-label">Notes</label>
        <input class="form-control" name="notes" placeholder="e.g., brand, size, alternative OK?">
      </div>
    </div>
    <div class="mt-3">
      <button class="btn btn-primary" {% if not session.house_id %}disabled{% endif %}>Create request</button>
      {% if not session.house_id %}<small class="text-muted ms-2">Sign in to create.</small>{% endif %}
    </div>
  </form>
{% endblock %}
