{% extends "base.html" %}
{% block content %}
  <h1 class="h4 mb-3">New Trip</h1>
  {% if not session.house_id %}
    <div class="alert alert-info">Please <a href="{{ url_for('signup') }}">sign in</a> first.</div>
  {% endif %}
  <form method="post" class="card card-body">
    <div class="row g-3">
      <div class="col-md-4">
        <label class="form-label">Village</label>
        <select class="form-select" name="village_id" required>
          <option value="">Chooseâ€¦</option>
          {% for v in villages %}
            <option value="{{ v.id }}">{{ v.name }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-4">
        <label class="form-label">Store (optional)</label>
        <select class="form-select" name="store_id">
          <option value="">Any store in the village</option>
          {% for s in stores %}
            <option value="{{ s.id }}">{{ s.name }} ({{ s.village.name }})</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-4">
        <label class="form-label">Departure (local time)</label>
        <input type="datetime-local" class="form-control" name="departure_time">
        <div class="form-text">Leave blank if flexible.</div>
      </div>
      <div class="col-12">
        <label class="form-label">Notes (capacity, car seats, etc.)</label>
        <input class="form-control" name="notes">
      </div>
    </div>
    <div class="mt-3">
      <button class="btn btn-success" {% if not session.house_id %}disabled{% endif %}>Create trip</button>
      {% if not session.house_id %}<small class="text-muted ms-2">Sign in to create.</small>{% endif %}
    </div>
  </form>
{% endblock %}
